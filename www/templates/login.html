<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>用户登录</title>
    <link rel="stylesheet" type="text/css" href="{{ static_url('lib/easyui/themes/default/easyui.css')}}">
    <link rel="stylesheet" type="text/css" href="{{ static_url('lib/easyui/themes/icon.css')}}">
    <link rel="stylesheet" type="text/css" href="{{ static_url('lib/easyui/demo/demo.css')}}">
    <script type="text/javascript" src="{{ static_url('lib/jquery/jquery.min.js')}}"></script>
    <script type="text/javascript" src="{{ static_url('lib/easyui/jquery.easyui.min.js')}}"></script>
    <script type="text/javascript" src="{{ static_url('lib/easyui/locale/easyui-lang-zh_CN.js')}}"></script>
</head>
<body style="text-align:center; background:#F4F4F4 url('static/resources/loginbg.jpg') no-repeat left top;
  background-size:100%;">
<div style="margin:150px auto;width:400px;height:100px;">
    <div class="easyui-panel" style="width:100%;background: #F7F7F7">
        <div style="padding:10px 60px 20px 60px;">
            <form id="ff" class="easyui-form" method="post" data-options="novalidate:true">
                <div style="text-align: center; font-size: 30px;color: #478fca">九三学社</div>
                <div style="text-align: center; font-size: 30px;color: #478fca">社员信息管理系统</div>
                <hr style="border-top:1px solid #D5E3EF;">
                <table cellpadding="5">
                    <tr>
                        <td colspan="2"></td>
                    </tr>
                    <tr>
                        <td style="font-size: 13px;font: inherit;">用户名:</td>
                        <td><input id="username" class="easyui-textbox" type="text" name="username">
                        </td>
                    </tr>
                    <tr>
                        <td style="font-size: 13px;font: inherit;">密&nbsp;&nbsp;&nbsp;码:</td>
                        <td><input id="passwd" class="easyui-textbox" type="password" name="passwd">
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" style="width: 20px; text-align: right; color:red">
                            <div id="error-msg"></div>
                        </td>
                    </tr>
                </table>
            </form>
            <div style="text-align:center;padding:5px;">
                <input type="button" onclick="submitForm()" value="登录"
                       style="border-width: 4px;padding: 4px 9px;line-height: 1.38;font-size: 13px;font: inherit;color:#FFFFFF;background-color: #1b6aaa !important;border-color: #428bca;width: 35%">
            </div>
            <div style="text-align: center; color:red">请使用<a
                    href="http://sw.bos.baidu.com/sw-search-sp/software/1b5bc4ffa7d9b/ChromeStandalone_57.0.2987.133_Setup.exe">Chrome</a>或者<a
                    href="http://download.firefox.com.cn/releases-sha2/stub/official/zh-CN/Firefox-latest.exe">firefox</a>浏览器访问本系统
            </div>
        </div>
    </div>
</div>
<script>
    //
    function browerType() {
        var explorer = navigator.userAgent;
        if (explorer.indexOf("Firefox") <= 0 && explorer.indexOf("Chrome") <= 0) {
            $('#error-msg').append('请使用Chrome或Firefox浏览器')
        }
    }
    browerType();
    //绑定密码框回车提交
    $('#passwd').textbox({
        inputEvents: $.extend({}, $.fn.textbox.defaults.inputEvents, {
            keyup: function (event) {
                if (event.keyCode == 13) {
                    submitForm()
                }
            }
        })
    });

    function submitForm() {
        $('#error-msg').empty();
        var explorer = navigator.userAgent;
        if (explorer.indexOf("Firefox") <= 0 && explorer.indexOf("Chrome") <= 0) {
            $('#error-msg').append('请使用Chrome或Firefox浏览器')
            return false;
        }
        $('#ff').form('submit', {
            url: '/login',
            onSubmit: function (param) {
                console.log($('#username').val())
                if ($('#username').val() == '' || $('#passwd').val() == '') {
                    $('#error-msg').append('用户名或密码不能为空!')
                    return false;
                }
            },
            success: function (data) {
                var result = JSON.parse(data);
                if (result.success) {
                    window.location.href = '/';
                } else {
                    $('#error-msg').append('用户名或密码错误!')
                }
            }
        });
    }
</script>
</body>
</html>